<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<nav class="bg-blue-600 text-white p-3 shadow-md">
    <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-lg font-bold">TOPUP ONLINE</h1>
        <div class="flex space-x-4">
            <a href="index.html" class="hover:underline">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
        <a href="totalGames.html" class="hover:underline">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</a>
        <a href="promotions.html" class="hover:underline">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</a>
        <a href="contact.html" class="hover:underline">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a> <!-- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏¥‡∏á‡∏Å‡πå -->
        <a href="about.html" class="hover:underline">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
        </div>
        <div class="flex space-x-4" id="user-section">
            <button id="login-btn" onclick="goToLogin()" class="text-white text-2xl">üë§</button>
        </div>
    </div>
</nav>
<body class="bg-gray-100">
    <div class="container mx-auto p-6 bg-white rounded-lg shadow-lg mt-6">
        <h2 class="text-xl font-bold text-center mb-4">üë• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
        <ul id="user-list" class="list-disc pl-6">
            <!-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
        </ul>
    </div>

    <script>
        async function loadUsers() {
    const token = localStorage.getItem("token");
    if (!token) {
        alert("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô!");
        window.location.href = "login.html";
        return;
    }

    let res = await fetch("http://localhost:3000/users", {
        headers: { "Authorization": `Bearer ${token}` }
    });

    let data = await res.json();
    
    // ‡∏ñ‡πâ‡∏≤ Token ‡∏ú‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
    if (res.status === 403) {
        alert("‚ùå Token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà");
        localStorage.removeItem("token"); 
        window.location.href = "login.html";
        return;
    }

    let userList = document.getElementById("user-list");
    userList.innerHTML = "";

    if (!Array.isArray(data)) {
        console.error("‚ùå API Error:", data);
        return;
    }

    data.forEach(user => {
        let li = document.createElement("li");
        li.innerText = `${user.id}: ${user.username}`;
        userList.appendChild(li);
    });
}
        loadUsers();
    </script>
    <script src="js/auth.js"></script>
</body>
</html>
